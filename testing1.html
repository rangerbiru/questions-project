<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Question</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");

      * {
        margin: 0;
        padding: 0;
        font-family: "Poppins", sans-serif;
        box-sizing: border-box;
      }

      .hidden {
        display: none;
      }

      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      h1 {
        text-decoration: underline;
      }

      .form-question,
      #list-question {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .question {
        width: 60%;
        box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        padding: 25px 40px;
        border-radius: 10px;
        margin: 30px 0;
      }

      .pertanyaan {
        text-align: center;
        margin-bottom: 20px;
      }

      .answers {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .answers label {
        border: 2px solid #000;
        padding: 20px 10px;
        border-radius: 10px;
        display: flex;
        gap: 6px;
        cursor: pointer;
        transition: 0.1s ease;
      }

      .answers label:hover {
        background-color: rgb(238, 132, 132);
      }

      input[type="radio"]:checked,
      input[type="checkbox"]:checked {
        accent-color: #f82222;
      }

      .text-tell-us textarea {
        width: 100%;
        resize: none;
        padding: 15px;
        border-radius: 10px;
        font-size: 18px;
        border: 2px solid #000;
      }

      .btn-submit {
        display: flex;
        width: 100%;
        text-align: center;
        justify-content: center;
        padding: 10px;
        font-size: 16px;
        border-radius: 10px;
        border: 2px solid #000;
        outline: none;
        margin-top: 10px;
        cursor: pointer;
      }

      #submitButton {
        border: none;
        outline: none;
        background-color: red;
        color: white;
        padding: 10px 15px;
        font-size: 18px;
        border-radius: 10px;
        width: 60%;
        margin-bottom: 20px;
        cursor: pointer;
      }

      @media (max-width: 768px) {
        .question {
          width: 100%;
        }

        .form-question {
          padding: 0 30px;
        }

        .text-tell-us textarea {
          font-size: 16px;
          padding: 10px;
        }

        #submitButton {
          width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>Electrician</h1>
      <div class="form-question">
        <div id="question1" class="question">
          <h2 class="pertanyaan">What do you need help with?</h2>
          <div class="answers">
            <label>
              <input
                type="radio"
                name="jawaban"
                value="Lights, outlets, or switches"
              />Lights, outlets, or switches</label
            >

            <label>
              <input
                type="radio"
                name="jawaban"
                value="Electrical for addition/remodel"
              />Electrical for addition/remodel
            </label>

            <label>
              <input
                type="radio"
                name="jawaban"
                value="Upgrade electrical wiring/panel"
              />Upgrade electrical wiring/panel
            </label>

            <label>
              <input type="radio" name="jawaban" value="Generator" />Generator
            </label>

            <label>
              <input
                type="radio"
                name="jawaban"
                value="Electric vehicle station installation"
              />Electric vehicle station installation
            </label>

            <label> <input type="radio" name="jawaban" value="Fan" />Fan</label>

            <label>
              <input
                type="radio"
                name="jawaban"
                value="Smart home system"
              />Smart home system
            </label>

            <label>
              <input
                type="radio"
                name="jawaban"
                value="Telephone"
              />Telephone</label
            >

            <label>
              <input
                type="radio"
                name="jawaban"
                value="Lightning rod/lightning protection"
              />Lightning rod/lightning protection</label
            >
          </div>
        </div>

        <div id="list-question"></div>
        <button id="submitButton" class="hidden" onclick="submitBtn()">
          Submit
        </button>
      </div>

      <!-- <button id="submitBtn" onclick="submitForm()" class="">Submit</button> -->
    </div>

    <script>
      var question = [
        {
          id: "null",
          pertanyaan: "What do you need help with?",
          jawaban: [],
          name: "null",
        },
        // Lights, outlets, or switches
        {
          id: "q1",
          pertanyaan: "What services do you need?",
          jawaban: [
            "Repair problem with electrical outlets or switches",
            "Install or relocate electrical outlets, switches or light fixtures",
            "Install or repair ceiling or exhaust fans",
            "Install electrical vehicle charging station",
            "Install or repair smart home system",
          ],
          name: "question1",
        },

        {
          id: "q1_1",
          pertanyaan: "What type of fan do you need help with?",
          jawaban: [
            "Ceiling Fan",
            "Bathroom exhaust fan",
            "Attic or whole house fan",
          ],
          name: "nextQuestion1_1",
        },

        {
          id: "q1_2",
          pertanyaan: "Are you installing or repairing an existing fan?",
          jawaban: ["Install new fan", "Repair existing fan"],
          name: "nextQuestion1_2",
        },

        // End Lights, outlets, or switches

        // Upgrade electrical wiring/panel
        {
          id: "q3",
          pertanyaan: "What kind of electrical service do you need?",
          jawaban: [
            "Repair electrical system problem (e.g. flickering lights, blown fuses, etc.)",
            "Upgrade electrical panel or electrical service",
            "Install electrical for home addition or remodel",
            "Install, repair or relocate electrical outlets, switches or light fixtures",
            "Install electrical vehicle charging station",
          ],
          name: "question3",
        },

        // End Upgrade electrical wiring/panel

        // Generator
        // Generator - Installation
        {
          id: "q4",
          pertanyaan: "What kind of generator work do you need help with?",
          jawaban: ["Installation", "Repair"],
          name: "question4",
        },

        {
          id: "q4_1_1",
          pertanyaan: "What type of generator are you interested in?",
          jawaban: [
            "Whole home/standby generator",
            "Portable generator",
            "Not sure/other",
          ],
          name: "nextQuestion4_1_1",
        },

        {
          id: "q4_1_2",
          pertanyaan: "What is the intended use?",
          jawaban: ["Emergency back-up power", "Primary power source", "Other"],
          name: "nextQuestion4_1_2",
        },

        {
          id: "q4_1_3",
          pertanyaan: "What electrical devices will be run by the generator?",
          jawaban: [
            "Entire house",
            "Regular house lighting",
            "Emergency lighting",
            "Refrigerator",
            "Water heater",
            "Other",
          ],
          name: "nextQuestion4_1_3",
        },

        {
          id: "q4_1_4",
          pertanyaan: "Do you need help purchasing a generator?",
          jawaban: ["Yes", "No"],
          name: "nextQuestion4_1_4",
        },

        // End Generator - Installation

        // Generator - Repair

        {
          id: "q4_2_1",
          pertanyaan: "What type of generator needs to be repaired?",
          jawaban: ["Portable", "Whole home/standby generator"],
          name: "nextQuestion4_2_1",
        },
        {
          id: "q4_2_2",
          pertanyaan: "What best describes the repair needed?",
          jawaban: [
            "General maintenance",
            "Not enough power",
            "Won't start",
            "Other",
          ],
          name: "nextQuestion4_2_2",
        },
        // End Generator - Repair

        // End Generator

        // Location Question
        {
          id: "location",
          pertanyaan: "What kind of location is this?",
          jawaban: ["Home", "Business"],
          name: "locationQuestion",
        },
        // End Location Question

        // When do you need this work done
        {
          id: "workDone",
          pertanyaan: "When do you need this work done?",
          jawaban: [
            "Within 2 weeks",
            "More than 2 weeks",
            "Not sure - still planning/budgeting",
          ],
          name: "work-done",
        },
        // End When do you need this work done

        // Please tell us a little about your project.
        {
          id: "tellUs",
          pertanyaan: "Please tell us a little about your project.",
          jawaban: [],
          name: "tell-us",
        },
        // End Please tell us a little about your project.
      ];

      // console.log(question);

      const listQuestion = document.getElementById("list-question");

      listQuestion.innerHTML = question
        .map((item) => {
          let answerHtml = "";
          if (item.id === "q4_1_3") {
            answerHtml = item.jawaban
              .map((jawab, index) => {
                return `
              <label>
                  <input type="checkbox" name="${item.name}" value="${jawab}" />${jawab}
              </label>`;
              })
              .join("");
          } else if (item.id === "tellUs") {
            answerHtml = `
              <div class="text-tell-us">
                  <textarea name="${item.name}" rows="3" placeholder="How can a pro help you? The more details the better - it helps pros provide the most accurate quote! (Optional)"></textarea>
              </div>`;
          } else {
            answerHtml = item.jawaban
              .map((jawab, index) => {
                return `
              <label>
                  <input type="radio" name="${item.name}" value="${jawab}" />${jawab}
              </label>`;
              })
              .join("");
          }

          return `
          <div id='${item.id}' class='hidden question'>
              <h2 class="pertanyaan"> ${item.pertanyaan}</h2>
              <div class="answers">
                  ${answerHtml}
              </div>
          </div>
          `;
        })
        .join("");

      const radioQuestion = document.querySelectorAll("input[name='jawaban']");
      // Question 1
      const radioQuestion1 = document.querySelectorAll(
        "input[name='question1']"
      );
      const nextRadioQuestion1_1 = document.querySelectorAll(
        "input[name='nextQuestion1_1']"
      );
      const nextRadioQuestion1_2 = document.querySelectorAll(
        "input[name='nextQuestion1_2']"
      );

      // Question 3
      const radioQuestion3 = document.querySelectorAll(
        "input[name='question3']"
      );

      // Question 4

      // Installation
      const radioQuestion4 = document.querySelectorAll(
        "input[name='question4']"
      );
      const nextRadioQuestion4_1_1 = document.querySelectorAll(
        "input[name='nextQuestion4_1_1']"
      );
      const nextRadioQuestion4_1_2 = document.querySelectorAll(
        "input[name='nextQuestion4_1_2']"
      );
      const nextRadioQuestion4_1_3 = document.querySelectorAll(
        "input[name='nextQuestion4_1_3']"
      );
      const nextRadioQuestion4_1_4 = document.querySelectorAll(
        "input[name='nextQuestion4_1_4']"
      );

      // Repair
      const nextRadioQuestion4_2_1 = document.querySelectorAll(
        "input[name='nextQuestion4_2_1']"
      );
      const nextRadioQuestion4_2_2 = document.querySelectorAll(
        "input[name='nextQuestion4_2_2']"
      );

      // Question Location
      const radioQuestionLocation = document.querySelectorAll(
        "input[name='locationQuestion']"
      );

      // Question Workdone
      const radioWorkDone = document.querySelectorAll(
        "input[name='work-done']"
      );

      // Question Tell Us
      const textAreaTellUs = document.querySelectorAll("input[name='tell-us']");

      // ---------------- Variable Input Radio --------------------------
      // Question 1
      const q1 = document.getElementById("q1");
      const q1_1 = document.getElementById("q1_1");
      const q1_2 = document.getElementById("q1_2");

      //Question 3
      const q3 = document.getElementById("q3");

      // Question 4
      const q4 = document.getElementById("q4");
      const q4_1_1 = document.getElementById("q4_1_1");
      const q4_1_2 = document.getElementById("q4_1_2");
      const q4_1_3 = document.getElementById("q4_1_3");
      const q4_1_4 = document.getElementById("q4_1_4");

      const q4_2_1 = document.getElementById("q4_2_1");
      const q4_2_2 = document.getElementById("q4_2_2");

      // Question Location
      const qlocation = document.getElementById("location");

      // Question Work Done
      const workDone = document.getElementById("workDone");

      // Question Tell Us
      const tellUs = document.getElementById("tellUs");

      // function qtn1() {
      //     q1.classList.remove("hidden");
      //     document.getElementById("q1").scrollIntoView({ behavior: 'smooth' });
      // }

      // ------------------- Penjawabaran --------------------
      // Question 1
      radioQuestion.forEach((radio) => {
        radio.addEventListener("change", (e) => {
          // Answer 1
          if (radio.value === "Lights, outlets, or switches") {
            q1.classList.remove("hidden");
            q1.scrollIntoView({ behavior: "smooth" });
            localStorage.setItem("What do you need help with?", e.target.value);
          } else {
            q1.classList.add("hidden");
            qlocation.classList.add("hidden");
            // Uncheck the radio buttons
            document
              .querySelectorAll('input[name="question1"]')
              .forEach((input) => {
                input.checked = false;
              });
            q1_1.classList.add("hidden");
            q1_2.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
            localStorage.removeItem("What services do you need?");
          }

          // Answer 2
          if (radio.value === "Electrical for addition/remodel") {
            qlocation.classList.remove("hidden");
            qlocation.scrollIntoView({ behavior: "smooth" });

            localStorage.setItem("What do you need help with?", e.target.value);
          } else {
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");

            localStorage.removeItem("What kind of location is this?");
          }

          // Answer 3
          if (radio.value === "Upgrade electrical wiring/panel") {
            q3.classList.remove("hidden");
            q3.scrollIntoView({ behavior: "smooth" });

            localStorage.setItem("What do you need help with?", e.target.value);
          } else {
            q3.classList.add("hidden");
            // Uncheck the radio buttons
            document
              .querySelectorAll('input[name="question3"]')
              .forEach((input) => {
                input.checked = false;
              });
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }

          // Answer 4
          if (radio.value === "Generator") {
            q4.classList.remove("hidden");
            q4.scrollIntoView({ behavior: "smooth" });

            localStorage.setItem("What do you need help with?", e.target.value);
          } else {
            q4.classList.add("hidden");
            // Uncheck the radio buttons
            document
              .querySelectorAll('input[name="question4"]')
              .forEach((input) => {
                input.checked = false;
              });
            q4_1_1.classList.add("hidden");
            q4_1_2.classList.add("hidden");
            q4_1_3.classList.add("hidden");
            q4_1_4.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 1
      radioQuestion1.forEach((radioNext) => {
        radioNext.addEventListener("change", (e) => {
          if (radioNext.value === "Install or repair ceiling or exhaust fans") {
            q1_1.classList.remove("hidden");
            q1_1.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="nextQuestion1_1"]')
              .forEach((input) => {
                input.checked = false;
              });
            localStorage.setItem("What services do you need?", e.target.value);
          } else {
            q1_1.classList.add("hidden");
            q1_2.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }

          if (radioNext.value !== "Install or repair ceiling or exhaust fans") {
            qlocation.classList.remove("hidden");
            qlocation.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
            localStorage.setItem("What services do you need?", e.target.value);
          } else {
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 1_1
      nextRadioQuestion1_1.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            q1_2.classList.remove("hidden");
            q1_2.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="nextQuestion1_2"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q1_2.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question1_2
      nextRadioQuestion1_2.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            qlocation.classList.remove("hidden");
            qlocation.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 3
      radioQuestion3.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            qlocation.classList.remove("hidden");
            qlocation.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_1
      radioQuestion4.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value === "Installation") {
            q4_1_1.classList.remove("hidden");
            q4_1_1.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="nextQuestion4_1_1"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q4_1_1.classList.add("hidden");
            q4_1_2.classList.add("hidden");
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }

          if (radioNext.value === "Repair") {
            q4_2_1.classList.remove("hidden");
            q4_2_1.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="nextQuestion4_2_1"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q4_2_1.classList.add("hidden");
            q4_2_2.classList.add("hidden");
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_1_1
      nextRadioQuestion4_1_1.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            q4_1_2.classList.remove("hidden");
            q4_1_2.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="nextQuestion4_1_2"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q4_1_2.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_1_2
      nextRadioQuestion4_1_2.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            q4_1_3.classList.remove("hidden");
            q4_1_3.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="nextQuestion4_1_3"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q4_1_3.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_1_3
      nextRadioQuestion4_1_3.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            q4_1_4.classList.remove("hidden");
            // q4_1_4.scrollIntoView({ behavior: "smooth" })
            document
              .querySelectorAll('input[name="nextQuestion4_1_4"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q4_1_4.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_1_4
      nextRadioQuestion4_1_4.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            qlocation.classList.remove("hidden");
            qlocation.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_2_1
      nextRadioQuestion4_2_1.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            q4_2_2.classList.remove("hidden");
            q4_2_2.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            q4_2_2.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Next Question 4_2_2
      nextRadioQuestion4_2_2.forEach((radioNext) => {
        radioNext.addEventListener("change", () => {
          if (radioNext.value) {
            qlocation.classList.remove("hidden");
            qlocation.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="locationQuestion"]')
              .forEach((input) => {
                input.checked = false;
              });
          } else {
            qlocation.classList.add("hidden");
            workDone.classList.add("hidden");
            tellUs.classList.add("hidden");
          }
        });
      });

      // Answer Location
      radioQuestionLocation.forEach((radio) => {
        radio.addEventListener("change", (e) => {
          if (radio.value) {
            workDone.classList.remove("hidden");
            workDone.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="work-done"]')
              .forEach((input) => {
                input.checked = false;
              });

            localStorage.setItem(
              "What kind of location is this?",
              e.target.value
            );
          }
        });
      });

      // Answer Work Done

      radioWorkDone.forEach((radio) => {
        radio.addEventListener("change", () => {
          if (radio.value) {
            tellUs.classList.remove("hidden");
            tellUs.scrollIntoView({ behavior: "smooth" });
            document
              .querySelectorAll('input[name="tell-us"]')
              .forEach((input) => {
                input.checked = false;
              });

            const btnlast = document.getElementById("submitButton");
            btnlast.classList.remove("hidden");
          }
        });
      });

      // Load LocalStorage
      const selectOpt = localStorage.getItem("What do you need help with?");
      const radioButton = document.querySelector(`input[value="${selectOpt}"]`);

      // Answer 1
      window.addEventListener("load", function () {
        if (selectOpt === "Lights, outlets, or switches") {
          radioButton.checked = true;
          q1.classList.remove("hidden");
        }

        if (selectOpt === "Electrical for addition/remodel") {
          radioButton.checked = true;
          qlocation.classList.remove("hidden");
        }

        if (selectOpt === "Upgrade electrical wiring/panel") {
          radioButton.checked = true;
          q3.classList.remove("hidden");
        }

        if (selectOpt === "Generator") {
          radioButton.checked = true;
          q4.classList.remove("hidden");
        }
      });

      function submitBtn() {
        var btnsRadio = document.querySelectorAll(
          'input[type="radio"]:checked'
        );
        var btnsCheck = document.querySelectorAll(
          'input[type="checkbox"]:checked'
        );
        var textOut = document.querySelectorAll("textarea[name='tell-us']");

        // Mendapatkan nilai-nilai dari radio button yang dipilih dan textarea
        const radioValues = Array.from(btnsRadio, (radio) => radio.value);
        const textValues = Array.from(textOut, (textarea) => textarea.value);
        const checkboxValues = Array.from(btnsCheck, (check) => check.value);

        console.log(radioValues);
        console.log(checkboxValues);
        console.log(textValues);
      }
    </script>
  </body>
</html>
